<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Chatã‚¢ãƒ—ãƒª</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºç”»é¢ -->
<div>
    <div>ğŸ‘¤<input type="text" id="username" ></div>
    <div>
        <textarea id="text" rows="5"></textarea>
        <button class="send-button" id="send"><img src="write.png" alt="button" width="30" height="30"></button>
    </div>
    <!-- ãƒªã‚¹ãƒˆè¡¨ç¤º-->
    <div id="output"></div>
</div>


<!--/ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºç”»é¢ -->



<!-- ä»¥ä¸‹JavaScripté ˜åŸŸ -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>


<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.5.2/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyAINLA65hXisCdvbjdKg0Pf2kvy9Pu9G3E",
    authDomain: "gscamp191208.firebaseapp.com",
    databaseURL: "https://gscamp191208.firebaseio.com",
    projectId: "gscamp191208",
    storageBucket: "gscamp191208.appspot.com",
    messagingSenderId: "455094499731",
    appId: "1:455094499731:web:667c8c8682a541caea9066"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);


//ä»¥ä¸‹ã€ãƒãƒ£ãƒƒãƒˆå‡¦ç†é ˜åŸŸï¼ˆãƒ¯ãƒ¼ã‚¯ï¼‰

  //é€å—ä¿¡ã®è¨­å®šæº–å‚™
  const newPostRef = firebase.database().ref();

  //MSGé€ä¿¡å‡¦ç†
    $("#send").on("click",function(){

        // console.log("OK")

        newPostRef.push({
            username: $("#username").val(),
            text: $("#text").val()

        });

        //ãƒ†ã‚­ã‚¹ãƒˆæ¬„ã ã‘ã‚’ç©ºç™½ã«ã™ã‚‹
        $("#text").val("")
    });

  //MSGå—ä¿¡å‡¦ç†
    newPostRef.on("child_added",function(data){
        
        let v = data.val();
        let k = data.key;
        
        //HTMLã«å—ä¿¡ã—ãŸMSGã‚’è¡¨ç¤º
        let str = `<p>${v.username}</p><br><p>${v.text}</p>`

        $("#output").prepend(str);

        console.log(v.username);

    });






</script>

</body>
</html>
































